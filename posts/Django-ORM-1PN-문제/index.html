<!DOCTYPE html><html lang="ko" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="Django ORM 1+N문제" /><meta property="og:locale" content="ko" /><meta name="description" content="ORM N+1 문제 django ORM은 Lazy-Loading 방식입니다. Lazy-Loading 방식을 사용하면 ORM에서 명령을 실행할 때마다 데이터베이스에서 데이터를 가져오는 것이 아니라 실제로 데이터를 불러와야 할 시점에 데이터베이스에 쿼리를 실행하는 방식입니다." /><meta property="og:description" content="ORM N+1 문제 django ORM은 Lazy-Loading 방식입니다. Lazy-Loading 방식을 사용하면 ORM에서 명령을 실행할 때마다 데이터베이스에서 데이터를 가져오는 것이 아니라 실제로 데이터를 불러와야 할 시점에 데이터베이스에 쿼리를 실행하는 방식입니다." /><link rel="canonical" href="https://jotasic.github.io/posts/Django-ORM-1PN-%EB%AC%B8%EC%A0%9C/" /><meta property="og:url" content="https://jotasic.github.io/posts/Django-ORM-1PN-%EB%AC%B8%EC%A0%9C/" /><meta property="og:site_name" content="Tasic’s blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-12-03T23:55:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Django ORM 1+N문제" /> <script type="application/ld+json"> {"description":"ORM N+1 문제 django ORM은 Lazy-Loading 방식입니다. Lazy-Loading 방식을 사용하면 ORM에서 명령을 실행할 때마다 데이터베이스에서 데이터를 가져오는 것이 아니라 실제로 데이터를 불러와야 할 시점에 데이터베이스에 쿼리를 실행하는 방식입니다.","url":"https://jotasic.github.io/posts/Django-ORM-1PN-%EB%AC%B8%EC%A0%9C/","@type":"BlogPosting","headline":"Django ORM 1+N문제","dateModified":"2021-12-04T00:10:37+09:00","datePublished":"2021-12-03T23:55:00+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://jotasic.github.io/posts/Django-ORM-1PN-%EB%AC%B8%EC%A0%9C/"},"@context":"https://schema.org"}</script><title>Django ORM 1+N문제 | Tasic's blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Tasic's blog"><meta name="application-name" content="Tasic's blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/avatar.jpeg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Tasic's blog</a></div><div class="site-subtitle font-italic">타식의 블로그</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/jotasic" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['embedded61','gamil.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Django ORM 1+N문제</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Django ORM 1+N문제</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Taewoo Kim </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Fri, Dec 3, 2021, 11:55 PM +0900" >Dec 3<i class="unloaded">2021-12-03T23:55:00+09:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sat, Dec 4, 2021, 12:10 AM +0900" >Dec 4<i class="unloaded">2021-12-04T00:10:37+09:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="794 words">4 min read</span></div></div><div class="post-content"><h1 id="orm-n1-문제">ORM N+1 문제</h1><p>django ORM은 Lazy-Loading 방식입니다. Lazy-Loading 방식을 사용하면 ORM에서 명령을 실행할 때마다 데이터베이스에서 데이터를 가져오는 것이 아니라 실제로 데이터를 불러와야 할 시점에 데이터베이스에 쿼리를 실행하는 방식입니다.</p><p>그래서 다음과 같이 QRM를 통해서 db의 data를 접근하면, <code class="language-console highlighter-rouge"><span class="go">n+1</span></code>번 쿼리를 실행하는 것을 확인 할 수 있습니다.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span text-data=" Python "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">171</span><span class="p">]:</span> <span class="n">dogs2</span> <span class="o">=</span> <span class="n">Dog</span><span class="p">.</span><span class="n">objects</span><span class="p">.</span><span class="nb">filter</span><span class="p">(</span><span class="n">id__gt</span><span class="o">=</span><span class="mi">65540</span><span class="p">)</span>

<span class="c1"># owner가 외레키
</span><span class="n">In</span> <span class="p">[</span><span class="mi">172</span><span class="p">]:</span> <span class="k">for</span> <span class="n">dog</span> <span class="ow">in</span> <span class="n">dogs2</span><span class="p">:</span>
             <span class="k">print</span><span class="p">(</span><span class="s">"Excute querry"</span><span class="p">)</span>
     <span class="p">...:</span>    <span class="n">dog</span><span class="p">.</span><span class="n">owner</span><span class="p">.</span><span class="n">name</span>
     <span class="p">...:</span>
</pre></table></code></div></div><p>이 예시에서는 <code class="language-console highlighter-rouge"><span class="go">2</span></code>건의 data를 얻을때, 총 <code class="language-console highlighter-rouge"><span class="go">3</span></code>번의 쿼리를 실행했습니다 <code class="language-console highlighter-rouge"><span class="go">(2+1)</span></code></p><p>한번의 호출로 N개의 모델을 가져오고, for loop를 돌면서 실제 데이터를 불러와야되는 시점에 <code class="language-console highlighter-rouge"><span class="go">1개의 row</span></code>를 가져오는 쿼리가 실행되는 것을 확인할 수 있습니다.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="o">(</span>0.001<span class="o">)</span> SELECT <span class="sb">`</span>dogs<span class="sb">`</span>.<span class="sb">`</span><span class="nb">id</span><span class="sb">`</span>, <span class="sb">`</span>dogs<span class="sb">`</span>.<span class="sb">`</span>owner_id<span class="sb">`</span>, <span class="sb">`</span>dogs<span class="sb">`</span>.<span class="sb">`</span>name<span class="sb">`</span>, <span class="sb">`</span>dogs<span class="sb">`</span>.<span class="sb">`</span>age<span class="sb">`</span> FROM <span class="sb">`</span>dogs<span class="sb">`</span> WHERE <span class="sb">`</span>dogs<span class="sb">`</span>.<span class="sb">`</span><span class="nb">id</span><span class="sb">`</span> <span class="o">&gt;</span> 65540<span class="p">;</span> <span class="nv">args</span><span class="o">=(</span>65540,<span class="o">)</span>

Excute querry
<span class="o">(</span>0.000<span class="o">)</span> SELECT <span class="sb">`</span>owners<span class="sb">`</span>.<span class="sb">`</span><span class="nb">id</span><span class="sb">`</span>, <span class="sb">`</span>owners<span class="sb">`</span>.<span class="sb">`</span>name<span class="sb">`</span>, <span class="sb">`</span>owners<span class="sb">`</span>.<span class="sb">`</span>email<span class="sb">`</span>, <span class="sb">`</span>owners<span class="sb">`</span>.<span class="sb">`</span>age<span class="sb">`</span> FROM <span class="sb">`</span>owners<span class="sb">`</span> WHERE <span class="sb">`</span>owners<span class="sb">`</span>.<span class="sb">`</span><span class="nb">id</span><span class="sb">`</span> <span class="o">=</span> 17 LIMIT 21<span class="p">;</span> <span class="nv">args</span><span class="o">=(</span>17,<span class="o">)</span>

Excute querry
<span class="o">(</span>0.000<span class="o">)</span> SELECT <span class="sb">`</span>owners<span class="sb">`</span>.<span class="sb">`</span><span class="nb">id</span><span class="sb">`</span>, <span class="sb">`</span>owners<span class="sb">`</span>.<span class="sb">`</span>name<span class="sb">`</span>, <span class="sb">`</span>owners<span class="sb">`</span>.<span class="sb">`</span>email<span class="sb">`</span>, <span class="sb">`</span>owners<span class="sb">`</span>.<span class="sb">`</span>age<span class="sb">`</span> FROM <span class="sb">`</span>owners<span class="sb">`</span> WHERE <span class="sb">`</span>owners<span class="sb">`</span>.<span class="sb">`</span><span class="nb">id</span><span class="sb">`</span> <span class="o">=</span> 17 LIMIT 21<span class="p">;</span> <span class="nv">args</span><span class="o">=(</span>17,<span class="o">)</span>
</pre></table></code></div></div><p>그러기 때문에, 이러한 방식은 불러들여야 되는 Row수가 많을 수록 쿼리문 실행 횟수가 많아집니다.</p><h1 id="eager-loading-">Eager-Loading ?</h1><p>Eager-Loading방식은 사전에 쓸 데이터를 포함하여 쿼리를 날리기 때문에 비효율적으로 늘어나는 쿼리 요청을 방지할 수 있습니다.</p><h2 id="select_related">select_related</h2><p>참조하는 대상이 중간테이블이 아닐 시, 쿼리문에서 Join을 이용해서 data를 불러드립니다.</p><p>바꿔 말하면, 두 테이블간 join을 할 수 있는 구조에서 사용 가능합니다.</p><p>또한 join을 해서 불러드리기 때문에, 쿼리문은 1번 실행됩니다.</p><p>마지막으로 중간테이블을 이용해서 관계를 형성하는, <code class="language-console highlighter-rouge"><span class="go">many-to-many 모델</span></code>에서는 사용할 수 없습니다.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span text-data=" Python "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">177</span><span class="p">]:</span> <span class="n">dogs2</span> <span class="o">=</span> <span class="n">Dog</span><span class="p">.</span><span class="n">objects</span><span class="p">.</span><span class="n">select_related</span><span class="p">(</span><span class="s">'owner'</span><span class="p">).</span><span class="nb">filter</span><span class="p">(</span><span class="n">id__gt</span><span class="o">=</span><span class="mi">65540</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">178</span><span class="p">]:</span> <span class="k">for</span> <span class="n">dog</span> <span class="ow">in</span> <span class="n">dogs2</span><span class="p">:</span>
     <span class="p">...:</span>    <span class="n">dog</span><span class="p">.</span><span class="n">owner</span><span class="p">.</span><span class="n">name</span>
     <span class="p">...:</span>
</pre></table></code></div></div><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="o">(</span>0.073<span class="o">)</span> SELECT <span class="sb">`</span>dogs<span class="sb">`</span>.<span class="sb">`</span><span class="nb">id</span><span class="sb">`</span>, <span class="sb">`</span>dogs<span class="sb">`</span>.<span class="sb">`</span>owner_id<span class="sb">`</span>, <span class="sb">`</span>dogs<span class="sb">`</span>.<span class="sb">`</span>name<span class="sb">`</span>, <span class="sb">`</span>dogs<span class="sb">`</span>.<span class="sb">`</span>age<span class="sb">`</span>, <span class="sb">`</span>owners<span class="sb">`</span>.<span class="sb">`</span><span class="nb">id</span><span class="sb">`</span>, <span class="sb">`</span>owners<span class="sb">`</span>.<span class="sb">`</span>name<span class="sb">`</span>, <span class="sb">`</span>owners<span class="sb">`</span>.<span class="sb">`</span>email<span class="sb">`</span>, <span class="sb">`</span>owners<span class="sb">`</span>.<span class="sb">`</span>age<span class="sb">`</span> FROM <span class="sb">`</span>dogs<span class="sb">`</span> INNER JOIN <span class="sb">`</span>owners<span class="sb">`</span> ON <span class="o">(</span><span class="sb">`</span>dogs<span class="sb">`</span>.<span class="sb">`</span>owner_id<span class="sb">`</span> <span class="o">=</span> <span class="sb">`</span>owners<span class="sb">`</span>.<span class="sb">`</span><span class="nb">id</span><span class="sb">`</span><span class="o">)</span> WHERE <span class="sb">`</span>dogs<span class="sb">`</span>.<span class="sb">`</span><span class="nb">id</span><span class="sb">`</span> <span class="o">&gt;</span> 65540<span class="p">;</span> <span class="nv">args</span><span class="o">=(</span>65540,<span class="o">)</span>
</pre></table></code></div></div><h2 id="prefetch_related">prefetch_related</h2><p>2개의 테이블을 각각 불러드려서, django내에서 합칩니다.</p><p>select_related을 사용할 수 없는 many-to-many모델에서 사용합니다.</p><blockquote><p>💡 1:1, 1:N 관계에서도 사용가능합니다.</p></blockquote><div class="language-python highlighter-rouge"><div class="code-header"> <span text-data=" Python "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="n">dogs2</span> <span class="o">=</span> <span class="n">Dog</span><span class="p">.</span><span class="n">objects</span><span class="p">.</span><span class="n">prefetch_related</span><span class="p">(</span><span class="s">'owner'</span><span class="p">).</span><span class="nb">filter</span><span class="p">(</span><span class="n">id__gt</span><span class="o">=</span><span class="mi">65540</span><span class="p">)</span>
<span class="k">for</span> <span class="n">dog</span> <span class="ow">in</span> <span class="n">dogs2</span><span class="p">:</span>
    <span class="n">dog</span><span class="p">.</span><span class="n">owner</span><span class="p">.</span><span class="n">name</span>
</pre></table></code></div></div><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="o">(</span>0.001<span class="o">)</span> SELECT <span class="sb">`</span>dogs<span class="sb">`</span>.<span class="sb">`</span><span class="nb">id</span><span class="sb">`</span>, <span class="sb">`</span>dogs<span class="sb">`</span>.<span class="sb">`</span>owner_id<span class="sb">`</span>, <span class="sb">`</span>dogs<span class="sb">`</span>.<span class="sb">`</span>name<span class="sb">`</span>, <span class="sb">`</span>dogs<span class="sb">`</span>.<span class="sb">`</span>age<span class="sb">`</span> FROM <span class="sb">`</span>dogs<span class="sb">`</span> WHERE <span class="sb">`</span>dogs<span class="sb">`</span>.<span class="sb">`</span><span class="nb">id</span><span class="sb">`</span> <span class="o">&gt;</span> 65540<span class="p">;</span> <span class="nv">args</span><span class="o">=(</span>65540,<span class="o">)</span>

<span class="o">(</span>0.000<span class="o">)</span> SELECT <span class="sb">`</span>owners<span class="sb">`</span>.<span class="sb">`</span><span class="nb">id</span><span class="sb">`</span>, <span class="sb">`</span>owners<span class="sb">`</span>.<span class="sb">`</span>name<span class="sb">`</span>, <span class="sb">`</span>owners<span class="sb">`</span>.<span class="sb">`</span>email<span class="sb">`</span>, <span class="sb">`</span>owners<span class="sb">`</span>.<span class="sb">`</span>age<span class="sb">`</span> FROM <span class="sb">`</span>owners<span class="sb">`</span> WHERE <span class="sb">`</span>owners<span class="sb">`</span>.<span class="sb">`</span><span class="nb">id</span><span class="sb">`</span> IN <span class="o">(</span>17<span class="o">)</span><span class="p">;</span> <span class="nv">args</span><span class="o">=(</span>17,<span class="o">)</span>
</pre></table></code></div></div><h1 id="헷갈린-점">헷갈린 점</h1><p>다른테이블을 참조안하고 조회 할 때도, N+1문제가 발생한다고 생각해습니다.</p><p>다음 예시는 자신의 테이블의 정보만 조회합니다.</p><p>그럴시에는 쿼리문이 1번만 실행됩니다.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span text-data=" Python "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="n">dogs2</span> <span class="o">=</span> <span class="n">Dog</span><span class="p">.</span><span class="n">objects</span><span class="p">.</span><span class="nb">filter</span><span class="p">(</span><span class="n">id__gt</span><span class="o">=</span><span class="mi">65540</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">184</span><span class="p">]:</span> <span class="k">for</span> <span class="n">dog</span> <span class="ow">in</span> <span class="n">dogs2</span><span class="p">:</span>
     <span class="p">...:</span>     <span class="k">print</span><span class="p">(</span><span class="s">"Excute querry"</span><span class="p">)</span>
     <span class="p">...:</span>     <span class="n">dog</span><span class="p">.</span><span class="n">name</span>
     <span class="p">...:</span>
</pre></table></code></div></div><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="o">(</span>0.001<span class="o">)</span> SELECT <span class="sb">`</span>dogs<span class="sb">`</span>.<span class="sb">`</span><span class="nb">id</span><span class="sb">`</span>, <span class="sb">`</span>dogs<span class="sb">`</span>.<span class="sb">`</span>owner_id<span class="sb">`</span>, <span class="sb">`</span>dogs<span class="sb">`</span>.<span class="sb">`</span>name<span class="sb">`</span>, <span class="sb">`</span>dogs<span class="sb">`</span>.<span class="sb">`</span>age<span class="sb">`</span> FROM <span class="sb">`</span>dogs<span class="sb">`</span> WHERE <span class="sb">`</span>dogs<span class="sb">`</span>.<span class="sb">`</span><span class="nb">id</span><span class="sb">`</span> <span class="o">&gt;</span> 65540<span class="p">;</span> <span class="nv">args</span><span class="o">=(</span>65540,<span class="o">)</span>
Excute querry
Excute querry
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/tip/'>Tip</a>, <a href='/categories/django/'>Django</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/django/" class="post-tag no-text-decoration">django</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Django ORM 1+N문제 - Tasic's blog&url=https://jotasic.github.io/posts/Django-ORM-1PN-%EB%AC%B8%EC%A0%9C/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Django ORM 1+N문제 - Tasic's blog&u=https://jotasic.github.io/posts/Django-ORM-1PN-%EB%AC%B8%EC%A0%9C/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Django ORM 1+N문제 - Tasic's blog&url=https://jotasic.github.io/posts/Django-ORM-1PN-%EB%AC%B8%EC%A0%9C/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/JS-Symbol/">Javascript Symbol</a><li><a href="/posts/JS-Iterable/">Javascript Iterable, iterator, generator</a><li><a href="/posts/Django-ORM-1PN-%EB%AC%B8%EC%A0%9C/">Django ORM 1+N문제</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/typescript/">typescript</a> <a class="post-tag" href="/tags/django/">django</a> <a class="post-tag" href="/tags/nest-js/">nest.js</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/typescript-%EC%97%B0%EC%82%B0%EC%9E%90%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%ED%83%80%EC%9E%85%EC%A0%95%EC%9D%98/"><div class="card-body"> <span class="timeago small" >Dec 4<i class="unloaded">2021-12-04T23:25:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Typescript 연산자를 이용한 타입정의</h3><div class="text-muted small"><p> 연산자를 이용한 타입정의 Union Tpye 유니온 타입(Union Type)이란 자바스크립트의 OR 연산자와 같이 A이거나 B이다 라는 의미의 타입이다. 이처럼 any를 사용하는 경우 마치 자바스크립트로 작성하는 것처럼 동작을 하고 유니온 타입을 사용하면 타입스크립트의 이점을 살리면서 코딩할 수 있다. 1 2 3 4 5 6 7 8 9 10 11...</p></div></div></a></div><div class="card"> <a href="/posts/Nestjs-%EA%B8%B0%EB%B3%B8-%EC%9A%A9%EC%96%B4-%EC%A0%95%EB%A6%AC/"><div class="card-body"> <span class="timeago small" >Nov 30<i class="unloaded">2021-11-30T11:33:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Nestjs 기본 용어 정리</h3><div class="text-muted small"><p> NestJS nest-js 구조 AppModule(root) ├──Module1 │ └──Controller │ └──Service │ └──.. │ └──.. ├──Module2 │ └──Controller │ └──Service │ └──.. │ └──.. 기본적인 명령어 프로젝트 생성 npm i -g @nestj...</p></div></div></a></div><div class="card"> <a href="/posts/typescript-%EA%B8%B0%EB%B3%B8%ED%83%80%EC%9E%85-%ED%95%A8%EC%88%98-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4/"><div class="card-body"> <span class="timeago small" >Dec 4<i class="unloaded">2021-12-04T12:50:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Typescript 기본타입, 함수, 인터페이스</h3><div class="text-muted small"><p> 타입스크립트 기본 타입 타입스크립트에는 12가지 기본타입이 있다. String 문자열을 나타냄 1 let str: string = 'hi'; Number 숫자를 나타냄 1 let num: number = 10; Boolean 참/거짓을 나타냄 1 let isLoggedIn: boolean = false; Object 이름과 값으로 구...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Nestjs-%EA%B8%B0%EB%B3%B8-%EC%9A%A9%EC%96%B4-%EC%A0%95%EB%A6%AC/" class="btn btn-outline-primary" prompt="Older"><p>Nestjs 기본 용어 정리</p></a> <a href="/posts/typescript-%EA%B8%B0%EB%B3%B8%ED%83%80%EC%9E%85-%ED%95%A8%EC%88%98-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4/" class="btn btn-outline-primary" prompt="Newer"><p>Typescript 기본타입, 함수, 인터페이스</p></a></div><script src="https://utteranc.es/client.js" repo="jotasic/jotasic.github.io" issue-term="pathname" theme="github-dark" crossorigin="anonymous" async> </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://github.com/jotasic">Taewoo Kim</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/typescript/">typescript</a> <a class="post-tag" href="/tags/django/">django</a> <a class="post-tag" href="/tags/nest-js/">nest.js</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> $(function() { let initTheme = "default"; if ($("html[mode=dark]").length > 0 || ($("html[mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Markdown converts to HTML */ $("pre").has("code.language-mermaid").each(function() { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<div class=\"mermaid\">${svgCode}</div>`); }); mermaid.initialize(mermaidConf); }); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
